---
import BaseLayout from '../../layouts/BaseLayout.astro'

const { searchParams } = Astro.url
const success = searchParams.get('success') === 'true'
const error = searchParams.get('error')

const title = success ? 'Inscrição Cancelada' : 'Cancelar Inscrição'
---

<BaseLayout title={`${title} - Puro Suco`} description="Cancelar inscrição da newsletter Puro Suco">
  <main class="min-h-screen bg-white text-gray-900 antialiased">
    <div class="container mx-auto px-6 py-16 max-w-2xl">
      <div class="text-center">
        <a
          href="/"
          class="inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors mb-8"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M19 12H5M12 19L5 12L12 5"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"></path>
          </svg>
          Voltar ao Puro Suco
        </a>

        {
          success ? (
            <div class="space-y-6">
              <div class="w-16 h-16 mx-auto bg-green-100 rounded-full flex items-center justify-center">
                <svg
                  class="w-8 h-8 text-green-600"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M5 13l4 4L19 7"
                  />
                </svg>
              </div>
              <h1 class="text-2xl font-semibold text-gray-900">Inscrição cancelada com sucesso</h1>
              <p class="text-gray-600 max-w-md mx-auto">
                Você foi removido da nossa lista de newsletter e não receberá mais emails do Puro
                Suco.
              </p>
              <p class="text-sm text-gray-500">
                Sentiremos sua falta! Se mudou de ideia, você pode se inscrever novamente a qualquer
                momento.
              </p>
            </div>
          ) : error ? (
            <div class="space-y-6">
              <div class="w-16 h-16 mx-auto bg-red-100 rounded-full flex items-center justify-center">
                <svg
                  class="w-8 h-8 text-red-600"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M6 18L18 6M6 6l12 12"
                  />
                </svg>
              </div>
              <h1 class="text-2xl font-semibold text-gray-900">Erro ao cancelar inscrição</h1>
              <p class="text-gray-600 max-w-md mx-auto">
                {error === 'invalid-request' && 'Link inválido ou expirado.'}
                {error === 'unsubscribe-failed' && 'Ocorreu um erro interno. Tente novamente.'}
                {!['invalid-request', 'unsubscribe-failed'].includes(error) &&
                  'Ocorreu um erro inesperado.'}
              </p>
              <p class="text-sm text-gray-500">Entre em contato conosco se o problema persistir.</p>
            </div>
          ) : (
            <div class="space-y-6">
              <div class="w-16 h-16 mx-auto bg-orange-100 rounded-full flex items-center justify-center">
                <svg
                  class="w-8 h-8 text-orange-600"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.502 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"
                  />
                </svg>
              </div>
              <h1 class="text-2xl font-semibold text-gray-900">Cancelar Inscrição</h1>
              <p class="text-gray-600 max-w-md mx-auto">
                Link de cancelamento inválido ou incompleto. Verifique o link no email recebido.
              </p>
            </div>
          )
        }
      </div>
    </div>
  </main>
</BaseLayout>
